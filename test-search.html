<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hå½¢é‹¼æ¤œç´¢ãƒ†ã‚¹ãƒˆ</title>
</head>
<body>
    <h1>Hå½¢é‹¼æ¤œç´¢ãƒ†ã‚¹ãƒˆ</h1>
    <div id="results"></div>

    <script src="steel_data.js"></script>
    <script>
        // ãƒ†ã‚¹ãƒˆç”¨ã®findSteelPropertiesFromLibraryé–¢æ•°ï¼ˆç°¡ç•¥ç‰ˆï¼‰
        function testFindSteelPropertiesFromLibrary(steelInfo) {
            console.log('ğŸ” ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‹ã‚‰æ–­é¢æ€§èƒ½ã‚’æ¤œç´¢:', steelInfo);
            
            if (typeof window.steelData === 'undefined') {
                console.warn('window.steelDataãŒåˆ©ç”¨ã§ãã¾ã›ã‚“');
                return null;
            }
            
            console.log('âœ… steelDataãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒåˆ©ç”¨å¯èƒ½:', Object.keys(window.steelData));
            
            const steelType = steelInfo.type;
            const spec = steelInfo.spec;
            
            // Hå½¢é‹¼ã®å ´åˆã¯ã€ã¾ãšæ­£ç¢ºãªæ–­é¢åã§æ¤œç´¢ã‚’è©¦è¡Œ
            if (steelType.startsWith('hkatakou') && spec) {
                console.log('ğŸ” Hå½¢é‹¼ã®æ­£ç¢ºãªæ–­é¢åã§æ¤œç´¢:', spec);
                
                // å…¨ã¦ã®Hå½¢é‹¼ã‚«ãƒ†ã‚´ãƒªã‚’æ¤œç´¢
                const hBeamCategories = ['hkatakou_hiro', 'hkatakou_naka', 'hkatakou_hoso'];
                
                for (const category of hBeamCategories) {
                    if (window.steelData[category]) {
                        console.log(`ğŸ” ${category} ã§æ–­é¢å "${spec}" ã‚’æ¤œç´¢`);
                        
                        for (let i = 0; i < window.steelData[category].data.length; i++) {
                            const rowData = window.steelData[category].data[i];
                            const sectionName = rowData[0] ? String(rowData[0]) : '';
                            
                            // æ–­é¢åãŒå®Œå…¨ä¸€è‡´ã™ã‚‹å ´åˆ
                            if (sectionName === spec) {
                                console.log(`âœ… æ­£ç¢ºãªæ–­é¢åã§ç™ºè¦‹: ${category} - ${sectionName}`);
                                return {
                                    index: i,
                                    rowData: rowData,
                                    sectionName: sectionName,
                                    steelType: category,
                                    matchType: 'exact'
                                };
                            }
                            
                            // æ–­é¢åã«å«ã¾ã‚Œã‚‹å ´åˆï¼ˆéƒ¨åˆ†ä¸€è‡´ï¼‰
                            if (sectionName.includes(spec) || spec.includes(sectionName)) {
                                console.log(`ğŸ” éƒ¨åˆ†ä¸€è‡´ç™ºè¦‹: ${category} - ${sectionName}`);
                                return {
                                    index: i,
                                    rowData: rowData,
                                    sectionName: sectionName,
                                    steelType: category,
                                    matchType: 'partial'
                                };
                            }
                        }
                    }
                }
            }
            
            return null;
        }

        // ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        function runTests() {
            const results = document.getElementById('results');
            results.innerHTML = '<h2>ãƒ†ã‚¹ãƒˆçµæœ</h2>';
            
            // ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹1: H-588Ã—300Ã—12Ã—20
            console.log('=== ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹1: H-588Ã—300Ã—12Ã—20 ===');
            const test1 = testFindSteelPropertiesFromLibrary({
                type: 'hkatakou_hiro', // åˆæœŸã‚¿ã‚¤ãƒ—ã¯åºƒå¹…
                spec: 'H-588Ã—300Ã—12Ã—20'
            });
            
            results.innerHTML += `<h3>ãƒ†ã‚¹ãƒˆ1: H-588Ã—300Ã—12Ã—20</h3>`;
            if (test1) {
                results.innerHTML += `<p>âœ… ç™ºè¦‹: ${test1.steelType} - ${test1.sectionName} (${test1.matchType})</p>`;
                results.innerHTML += `<p>æ–­é¢æ€§èƒ½: Ix=${test1.rowData[6]}, A=${test1.rowData[4]}, Zx=${test1.rowData[10]}</p>`;
            } else {
                results.innerHTML += `<p>âŒ è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</p>`;
            }
            
            // ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹2: 588Ã—300 (ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å®Ÿéš›ã®å½¢å¼)
            console.log('=== ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹2: 588Ã—300 ===');
            const test2 = testFindSteelPropertiesFromLibrary({
                type: 'hkatakou_hiro',
                spec: '588Ã—300'
            });
            
            results.innerHTML += `<h3>ãƒ†ã‚¹ãƒˆ2: 588Ã—300</h3>`;
            if (test2) {
                results.innerHTML += `<p>âœ… ç™ºè¦‹: ${test2.steelType} - ${test2.sectionName} (${test2.matchType})</p>`;
                results.innerHTML += `<p>æ–­é¢æ€§èƒ½: Ix=${test2.rowData[6]}, A=${test2.rowData[4]}, Zx=${test2.rowData[10]}</p>`;
            } else {
                results.innerHTML += `<p>âŒ è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</p>`;
            }
            
            // ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹3: éƒ¨åˆ†ä¸€è‡´ãƒ†ã‚¹ãƒˆ
            console.log('=== ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹3: éƒ¨åˆ†ä¸€è‡´ãƒ†ã‚¹ãƒˆ ===');
            const test3 = testFindSteelPropertiesFromLibrary({
                type: 'hkatakou_hiro',
                spec: '588Ã—300Ã—12Ã—20'
            });
            
            results.innerHTML += `<h3>ãƒ†ã‚¹ãƒˆ3: 588Ã—300Ã—12Ã—20</h3>`;
            if (test3) {
                results.innerHTML += `<p>âœ… ç™ºè¦‹: ${test3.steelType} - ${test3.sectionName} (${test3.matchType})</p>`;
                results.innerHTML += `<p>æ–­é¢æ€§èƒ½: Ix=${test3.rowData[6]}, A=${test3.rowData[4]}, Zx=${test3.rowData[10]}</p>`;
            } else {
                results.innerHTML += `<p>âŒ è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</p>`;
            }
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å¾Œã«ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        window.addEventListener('load', runTests);
    </script>
</body>
</html>
